# Start the rewrite engine
RewriteEngine On
RewriteBase /

# Rewrite to www
RewriteCond %{HTTP_HOST} !^www.makeroid.tk
RewriteCond %{HTTP_HOST} !^users.makeroid.tk
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Remove PHP extension
RewriteCond %{REQUEST_FILENAME}\.php -f [NC]
RewriteRule ^(.+?)/?$ $1.php

# Redirect root requests
Redirect /index.php /home
Redirect /index.html /home


# Error Pages
ErrorDocument 400 /error/400.html
ErrorDocument 401 /error/401.html
ErrorDocument 403 /error/403.html
ErrorDocument 404 /error/404.html
ErrorDocument 500 /error/500.html
ErrorDocument 501 /error/501.html
ErrorDocument 502 /error/502.html
ErrorDocument 503 /error/503.html


# Security for the update page
<FilesMatch "update.php">
  AuthName "Input the password to update the website"
  AuthType Basic
  AuthUserFile /var/www/html/.htpasswd
  require valid-user
</FilesMatch>


# Forward Companion Download
Redirect 301 /files/companion.apk https://rink.hockeyapp.net/apps/93f5fed412b2457296f351cd0f1d824e
